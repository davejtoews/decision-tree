<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
		<link href='https://fonts.googleapis.com/css?family=Lato:400,900' rel='stylesheet' type='text/css'>
		<style>

			body {
				text-align: center;
				font-family: Lato, sans-serif;
			}

			h2 {
				font-weight: 900;
				font-size: 2em;
				margin-top: 15vh;
			}

			ul {
				list-style: none;
				padding: 0;
				font-size: 1.3em;
			}

			li {
				margin : 0.5em 0;
			}

			a {
				display: inline-block;
				text-decoration: none;
				color: #fff;
				padding: 0.5em 1em;
				background: teal;
			}

		</style>
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    </head>
    <body>
		<h2 id="question"></h2>
		<ul id="answers"></ul>    	
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>

            var questions = {
                '0': {
                    'question' : 'Where are you?',
                    'answers' : {
                        'Kensington' : '1',
                        'North': '5',
                        'South' : [
                            'Jack Astor\'s',
                            '1600 Bier Haus',
                            'Kildare\'s',
                            'Limerick\'s',
                            'Murmur'
                        ]
                    }

                },
                '1' : {
                    'question' : 'Do you like dive bars?',
                    'answers' : {
                        'Yes' : ['Regal Beagle'],
                        'No' : '2' 
                    }
                },
                '2' : {
                    'question' : 'Do you lift, bro?',
                    'answers' : {
                        'Yes' : ['Molly Malone\'s'],
                        'No' : '3'
                    }
                },
                '3' : {
                    'question' : 'Are you fancy?',
                    'answers' : {
                        'Yes' : ['Winebar'],
                        'No' : '4'
                    }               
                },
                '4' : {
                    'question' : 'Are you quirky?',
                    'answers' : {
                        'Yes' : ['Container Bar'],
                        'No' : ['Kensington Pub', 'Yardhouse', 'Original Joe\'s']
                    }
                },
                '5' : {
                    'question' : 'Are you a student',
                    'answers' : {
                        'Yes' : ['Kilkenny'],
                        'No' : '6'
                    }
                },
                '6' : {
                    'question' : 'Are you a mild mannered suburbanite?',
                    'answers' : {
                        'Yes' : ['Brewhouse'],
                        'No' :  '7'
                    }                  
                },
                '7' : {
                    'question' : 'Do you work with your hands?',
                    'answers' : {
                        'Yes' : ['Black Bull'],
                        'No' : '8'
                    }                   
                },
                '8' : {
                    'question' : 'Are you at the airport',
                    'answers' : {
                        'Yes' : ['Molson Brew House'],
                        'No' : ['Woody\'s']
                    }                    
                }
            }

        	var answers;

        	$(document).ready( function() {
        		populate(questions, '0');
        	});

        	function select(index) {
        		if(!Array.isArray(answers[index])) {
        			populate(questions, answers[index]);
        		} else {
        			finish(answers[index]);
        		};
        	}

            function populate(question, questionId) {
                var node = question[questionId];
                $('#question').html(node.question);
                answerList = ''
                answers = node.answers;
                $.each(answers, function(index, value) {
                    answerList += '<li class="question"><a href="" onClick="event.preventDefault(); select(\''+ index +'\');" >'+ index + '</a></li>';
                });
                $('#answers').html(answerList);           
            }

        	function finish(bars) {
        		$('#question').html("You should go to:");
        		var barList= '';
        		$.each(bars, function(index, value) {

        			barList += '<li class="bar">' + value + '</li>';
        		});
        		$('#answers').html(barList);
        	}
        </script>
    </body>
</html>

